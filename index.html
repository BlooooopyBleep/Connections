var selectedTextBox = null;
    var touchInProgress = false;

    function handleClick(clickedTextBox) {
      if (!touchInProgress) {
        if (selectedTextBox) {
          var tempText = selectedTextBox.innerHTML;
          selectedTextBox.innerHTML = clickedTextBox.innerHTML;
          clickedTextBox.innerHTML = tempText;
          selectedTextBox.classList.remove('selected');
          selectedTextBox = null;
        } else {
          selectedTextBox = clickedTextBox;
          selectedTextBox.classList.add('selected');
        }
      }
    }

    function resetGrid() {
      for (var wordNum = 1; wordNum <= 16; wordNum++) {
        document.getElementById("box" + wordNum).innerHTML = data[wordNum - 1];
      }
      for (var wordNum = 1; wordNum <= 16; wordNum++) {
        document.getElementById("num" + wordNum).innerHTML = "<i>&nbsp</i>";
      }
    }

    var draggedItem = null;

    function handleTouchStart(event) {
      touchInProgress = true;
      var touch = event.touches[0];
      draggedItem = document.elementFromPoint(touch.clientX, touch.clientY);
      draggedItem.classList.add('dragged-item'); // Apply the dragged-item style
    }

    function handleTouchMove(event) {
      event.preventDefault();
      if (draggedItem) {
        var touch = event.touches[0];
        var target = document.elementFromPoint(touch.clientX, touch.clientY);
        if (target && target.classList.contains('grid-item')) {
          var data = draggedItem.innerHTML;
          draggedItem.innerHTML = target.innerHTML;
          target.innerHTML = data;
        }
      }
    }

    function handleTouchEnd() {
      if (draggedItem) {
        draggedItem.classList.remove('dragged-item'); // Remove the dragged-item style
        draggedItem = null;
        touchInProgress = false;
      }
    }

    // Add touch event listeners
    document.addEventListener('touchstart', handleTouchStart, { passive: false });
    document.addEventListener('touchmove', handleTouchMove, { passive: false });
    document.addEventListener('touchend', handleTouchEnd, { passive: false });

    // Add drag-and-drop event listeners for computer
    document.addEventListener('dragstart', function (event) {
      draggedItem = event.target;
      event.dataTransfer.setData('text/plain', draggedItem.innerHTML);
      draggedItem.classList.add('dragged-item'); // Apply the dragged-item style
    });
    document.addEventListener('dragover', function (event) {
      event.preventDefault();
    });
    document.addEventListener('drop', function (event) {
      event.preventDefault();
      handleDrop(event);
    });

    function handleDrop(event) {
      if (draggedItem) {
        var target = document.elementFromPoint(event.clientX, event.clientY);
        if (target && target.classList.contains('grid-item')) {
          var data = event.dataTransfer.getData('text/plain');
          draggedItem.innerHTML = target.innerHTML;
          target.innerHTML = data;
        }

        draggedItem.classList.remove('dragged-item'); // Remove the dragged-item style
        draggedItem = null;
      }
    }
